<!-- Sources generated by springboot-scaffolding-maven-plugin  -->
<ui:composition
        template="/template/backoffice_layout.xhtml"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:o="http://omnifaces.org/ui"
>

    <ui:param name="pageName" value="#{msg['app.admin.widget.title']}"/>
    <ui:param name="subPageName" value="#{ WidgetEditManagedBean.isEditing()? msg['app.admin.widget.edit.title'] : msg['app.admin.widget.create.title']}"/>
    <ui:define name="title">
        #{msg['app.admin.widget.title']} - #{ WidgetEditManagedBean.isEditing()? msg['app.admin.widget.edit.title'] : msg['app.admin.widget.create.title']}
    </ui:define>
    <ui:define name="content">
        <div class="row">
            <div class="col-md-12">
                <div class="panel animated zoomIn">
                    <div class="panel-heading clearfix">
                        <h3 class="panel-title">#{ WidgetEditManagedBean.isEditing() ? msg['app.admin.widget.edit.header'] : msg['app.admin.widget.create.header']}</h3>
                    </div>
                    <div class="panel-body">

                        <h:form id="form">
                            <div class="form-group #{!name.valid ? 'has-error' : ''}">
                                <label for="name">#{msg['app.admin.widget.field.name']} *</label>
                                <p:messages for="name" showIcon="false" />
                                <p:inputText id="name"
                                             value="#{ WidgetEditManagedBean.widget.name}"
                                             placeholder="#{msg['app.admin.widget.field.name.placeholder']}"
                                             styleClass="form-control"
                                             required="true"
                                             requiredMessage="#{msg['app.admin.widget.field.name.required']}"
                                             binding="#{ name }"
                                />
                            </div>
                            <div class="form-group #{!description.valid ? 'has-error' : ''}">
                                <label for="description">#{msg['app.admin.widget.field.description']} *</label>
                                <p:messages for="description" showIcon="false" />
                                <p:inputText id="description"
                                             value="#{ WidgetEditManagedBean.widget.description}"
                                             placeholder="#{msg['app.admin.widget.field.description.placeholder']}"
                                             styleClass="form-control"
                                required="true"
                                requiredMessage="#{msg['app.admin.widget.field.description.required']}"
                                binding="#{ description }"
                                />
                            </div>
                            <div class="form-group #{!requirement.valid ? 'has-error' : ''}">
                                <label for="requirement">#{msg['app.admin.widget.field.requirement']}</label>
                                <p:messages for="requirement" showIcon="false" />
                                <p:inputText id="requirement"
                                             value="#{ WidgetEditManagedBean.widget.info}"
                                             placeholder="#{msg['app.admin.widget.field.requirement.placeholder']}"
                                             styleClass="form-control"
                                             binding="#{ requirement }"
                                />
                            </div>
                            <div class="form-group #{!technicalName.valid ? 'has-error' : ''}">
                                <label for="technicalName">#{msg['app.admin.widget.field.technicalname']} *</label>
                                <p:messages for="technicalName" showIcon="false" />
                                <p:inputText id="technicalName"
                                             value="#{ WidgetEditManagedBean.widget.technicalName}"
                                             placeholder="#{msg['app.admin.widget.field.technicalname.placeholder']}"
                                             styleClass="form-control"
                                binding="#{ technicalName }"
                                />
                            </div>
                            <div class="form-group spinner">
                                <label for="delay">#{msg['app.admin.widget.field.delay']} *</label>
                                <p:spinner id="delay"
                                           value="#{ WidgetEditManagedBean.widget.delay }"
                                           styleClass="form-control"
                                           min="400"
                                />
                            </div>
                            <h:panelGroup layout="block" id="avatar-layout" class="form-group">
                                <label for="avatar">#{msg['app.admin.widget.field.image']} *</label>
                                <p:messages for="image" showIcon="false" />
                                <div class="form-control form-image">
                                    <c:if test="#{not empty WidgetEditManagedBean.widget.image}">
                                        <img class="img-widgets" id="image" src="#{request.contextPath}/api/asset/#{WidgetEditManagedBean.encrypt(WidgetEditManagedBean.widget.image)}" />
                                    </c:if>

                                    <p:fileUpload id="avatar"
                                                  fileUploadListener="#{ WidgetEditManagedBean.uploadImage}"
                                                  auto="true"
                                                  mode="advanced"
                                                  sizeLimit="3000000"
                                                  update="avatar-layout"
                                                  allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />
                                </div>
                            </h:panelGroup>

                            <div class="form-group ">
                                <label for="widgetAvailability">#{msg['app.admin.widget.field.widgetAvailability']}</label>
                                <o:importConstants type="io.suricate.monitoring.model.enums.WidgetAvailabilityEnum" />
                                <p:selectOneMenu id="widgetAvailability" value="#{ WidgetEditManagedBean.widget.widgetAvailability}" style="width:150px">
                                    <f:selectItem itemLabel="#{msg['app.admin.widget.field.category.dropdownlabel']}" itemValue="" noSelectionOption="true" />
                                    <f:selectItems value="#{ WidgetAvailability.values()}" var="entry" itemValue="#{entry.name()}" itemLabel="#{entry.name()}" />
                                </p:selectOneMenu>
                            </div>


                            <h3 class="with-line no-padding">#{msg['app.admin.widget.field.category']}</h3>

                            <p:selectOneMenu value="#{ WidgetEditManagedBean.selectedCategory}" style="width:350px">
                                <f:selectItem itemLabel="#{msg['app.admin.widget.field.category.dropdownlabel']}" itemValue="" noSelectionOption="true" />
                                <f:selectItems value="#{ WidgetEditManagedBean.getListCategory()}" var="entry" itemValue="#{entry.id}" itemLabel="#{entry.getExplicitName()}" />
                            </p:selectOneMenu>


                            <div class="pull-right">
                                    <p:commandButton class="btn btn-danger btn-with-icon"
                                                 icon="fa fa-trash"
                                                 action="#{ WidgetEditManagedBean.delete()}"
                                                 value="#{msg['app.admin.widget.delete']}"
                                                 rendered="#{ WidgetEditManagedBean.isEditing()}"
                                    >
                                        <p:confirm header="Confirmation" message="Are you sure?" icon="ui-icon-alert" />
                                    </p:commandButton>

                                    <p:commandButton class="btn btn-primary btn-with-icon"
                                              icon="fa fa-check"
                                              action="#{ WidgetEditManagedBean.save()}"
                                              update="@form"
                                              value="#{msg['app.admin.widget.save']}"
                                    />

                                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes btn btn-danger btn-xs" icon="fa fa-check" />
                                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no btn btn-primary btn-xs spaceleft" icon="fa fa-close" />
                                    </p:confirmDialog>
                            </div>
                            <input type="hidden"  name="#{_csrf.parameterName}"   value="#{_csrf.token}"/>
                        </h:form>
                    </div>
                </div>
            </div>
        </div>
    </ui:define>

</ui:composition>